{% extends  'base.html' %}

{% block content %}
  <h1>Estad√≠sticas</h1>

  <div id="container" style="width: 75%;">
    <canvas id="contagios_chart" data-url="{% url 'contagios_chart' %}"></canvas>
  </div>
  <script>

    $(function () {

      var $populationChart = $("#contagios_chart");
      $.ajax({
        url: $populationChart.data("url"),
        success: function (data)
        {
          var ctx = $populationChart[0].getContext("2d");
          new Chart(ctx,
          {
            type: 'pie',
            data: {
              datasets: [{
                data: data.data,
                backgroundColor: ['#696969', '#808080', '#A9A9A9', '#C0C0C0', '#D3D3D3'],
                label: 'Mes'
              }],
              labels: data.labels
            },
            options: {
              responsive: true,
              title: {
                display: true,
                text: 'Contagios en Chile'
              },
              legend: {
                display: true,
                labels: {
                  fontColor: 'rgb(255, 99, 132)'
                }
              }
            }
          });
        }
      });
    });
  </script>

  {% if user.is_staff %}
    <a class="btn btn-primary btn-lg" href="/estadistica/create/" role="button">Agregar</a>
  {% endif %}
{% endblock %}